name: Upload Video to PixelDrain

on:
  workflow_dispatch:
    inputs:
      video_url:
        description: 'ضع رابط تحميل الفيديو هنا (أو مساره)'
        required: true
        default: 'https://example.com/video.mp4'

jobs:
  upload:
    runs-on: ubuntu-latest
    steps:
      - name: Download Video
        run: |
          # تحميل الفيديو من الرابط الذي وضعته في خانة الإدخال
          curl -L "${{ github.event.inputs.video_url }}" -o "downloaded_video.mp4"

      - name: Upload to PixelDrain
        run: |
          RESPONSE=$(curl -F "file=@downloaded_video.mp4" https://pixeldrain.com/api/file)
          FILE_ID=$(echo $RESPONSE | jq -r '.id')
          
          echo "------------------------------------------"
          echo "تمت العملية بنجاح!"
          echo "الرابط المباشر: https://pixeldrain.com/api/file/$FILE_ID"
          echo "------------------------------------------"
